<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empresa | Xerox do caco</title>
    <link rel="stylesheet" href="empresa.css">
</head>
<body>

<header class="navbar">
    <div class="container nav-wrapper">
          <a href="index.html" class="logo">
            <img src="https://i.postimg.cc/5td7pqXy/logo-photp-(1).png" alt="Logo Xerox do caco">
        </a>
        
        <nav id="nav">
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../produtos/index.html">Produtos</a></li>
                <li><a href="index.html" class="active">Empresa</a></li>
            </ul>
        </nav>

        <button id="btn-mobile" aria-label="Abrir Menu">
            <span id="hamburger"></span>
        </button>
    </div>
</header>

<main class="container section">
    <div class="empresa-intro">
        <div class="empresa-img-container">
            <img id="display-foto" src="https://via.placeholder.com/800x600" alt="Fachada Peniel">
        </div>
        
        <div class="empresa-texto">
            <h1 class="titulo-pagina">Nossa <span>História</span></h1>
            <p id="display-sobre">Carregando história de dedicação e qualidade...</p>
            
            <div class="empresa-stats">
                <div class="stat">
                    <strong>Missão</strong>
                    <span id="display-missao">Prover as melhores soluções em construção com excelência e ética.</span>
                </div>
            </div>

            <a href="#" id="link-whatsapp" class="btn-zap-empresa" target="_blank">
                Entre em contato direto
            </a>
        </div>
    </div>

    <section class="mapa-section">
        <h2 class="section-title">Onde <span>Estamos</span></h2>
        <p id="display-endereco">Localizando endereço...</p>
        <div class="google-maps" id="map-container">
            </div>
    </section>
</main>

<footer class="footer">
    <div class="container">
        <p>&copy; 2026 Peniel Materiais - Excelência em Construção</p>
    </div>
</footer>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCNYVaYrjUZKWYP-yV8AU2awmzcp7M7IoA",
        authDomain: "penielmatconst.firebaseapp.com",
        projectId: "penielmatconst",
        storageBucket: "penielmatconst.firebasestorage.app",
        messagingSenderId: "769088435817",
        appId: "1:769088435817:web:5496b08f49aae3756d94f8"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Lógica do Menu Mobile
    const btnMobile = document.getElementById('btn-mobile');
    const nav = document.getElementById('nav');
    if(btnMobile) {
        btnMobile.onclick = () => nav.classList.toggle('active');
    }

    // Carregar Dados do Firebase
    async function carregarDadosEmpresa() {
        try {
            const docSnap = await getDoc(doc(db, "configuracao", "perfil"));
            if (docSnap.exists()) {
                const d = docSnap.data();
                document.getElementById('display-sobre').innerText = d.sobre || "";
                document.getElementById('display-missao').innerText = d.missao || "";
                if (d.fotoFachada) document.getElementById('display-foto').src = d.fotoFachada;
                
                if (d.whatsapp) {
                    const zap = d.whatsapp.replace(/\D/g, "");
                    document.getElementById('link-whatsapp').href = `https://wa.me/55${zap}`;
                }

                const mapContainer = document.getElementById('map-container');
                if (d.mapa) {
                    mapContainer.innerHTML = d.mapa;
                    document.getElementById('display-endereco').style.display = "none";
                }
            }
        } catch (e) { console.error(e); }
    }
    carregarDadosEmpresa();
</script>

</body>
</html>